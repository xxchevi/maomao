import{_ as z}from"./CagzVXW1.js";import{p as S,u as C,q,y as N,g,h as U,i as w,c as u,a as t,d as m,b as B,w as _,m as A,e as v,k as d,v as i,f as r,t as k,s as P,o as p}from"./C_JLxRH9.js";import{u as D}from"./8g37b03D.js";const M={class:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},T={class:"max-w-md w-full space-y-8"},j={class:"mt-2 text-center text-sm text-gray-600"},G={class:"space-y-4"},H={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},L=["disabled"],E={key:0,class:"mr-2"},K={__name:"register",async setup(F){let c,f;const x=S(),b=C();x.isLoggedIn&&([c,f]=q(()=>P("/game")),await c,f());const e=N({username:"",nickname:"",email:"",password:"",confirmPassword:""}),l=g(!1),o=g(""),y=U(()=>e.username&&e.nickname&&e.password&&e.confirmPassword&&e.password===e.confirmPassword&&e.password.length>=6);w(()=>e.confirmPassword,()=>{e.password&&e.confirmPassword&&e.password!==e.confirmPassword?o.value="ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´":o.value=""}),w(()=>e.password,()=>{e.password&&e.password.length<6?o.value="å¯†ç é•¿åº¦è‡³å°‘ä¸º6ä½":e.confirmPassword&&e.password!==e.confirmPassword?o.value="ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´":o.value=""});const V=async()=>{if(!(l.value||!y.value)){l.value=!0,o.value="";try{const n=await x.register(e.username,e.nickname,e.email,e.password);n.success?(b.initSocket(),await b.loadGameData(),await P("/game")):o.value=n.error||"æ³¨å†Œå¤±è´¥"}catch(n){o.value=n.message||"æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"}finally{l.value=!1}}};return D({title:"æ³¨å†Œ - çŒ«çŒ«æŒ‚æœºæ¸¸æˆ"}),(n,s)=>{const h=z;return p(),u("div",M,[t("div",T,[t("div",null,[s[7]||(s[7]=t("div",{class:"text-center text-4xl mb-4"},"ğŸ±",-1)),s[8]||(s[8]=t("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," åˆ›å»ºè´¦å· ",-1)),t("p",j,[s[6]||(s[6]=m(" å·²æœ‰è´¦å·ï¼Ÿ ",-1)),B(h,{to:"/login",class:"font-medium text-blue-600 hover:text-blue-500"},{default:_(()=>s[5]||(s[5]=[m(" ç«‹å³ç™»å½• ",-1)])),_:1,__:[5]})])]),t("form",{class:"mt-8 space-y-6",onSubmit:A(V,["prevent"])},[t("div",G,[t("div",null,[s[9]||(s[9]=t("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," ç”¨æˆ·å ",-1)),d(t("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=a=>r(e).username=a),type:"text",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"},null,512),[[i,r(e).username]])]),t("div",null,[s[10]||(s[10]=t("label",{for:"nickname",class:"block text-sm font-medium text-gray-700"}," æ˜µç§° ",-1)),d(t("input",{id:"nickname","onUpdate:modelValue":s[1]||(s[1]=a=>r(e).nickname=a),type:"text",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"è¯·è¾“å…¥æ˜µç§°"},null,512),[[i,r(e).nickname]])]),t("div",null,[s[11]||(s[11]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," é‚®ç®±åœ°å€ï¼ˆå¯é€‰ï¼‰ ",-1)),d(t("input",{id:"email","onUpdate:modelValue":s[2]||(s[2]=a=>r(e).email=a),type:"email",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"è¯·è¾“å…¥é‚®ç®±åœ°å€ï¼ˆå¯é€‰ï¼‰"},null,512),[[i,r(e).email]])]),t("div",null,[s[12]||(s[12]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," å¯†ç  ",-1)),d(t("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=a=>r(e).password=a),type:"password",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰"},null,512),[[i,r(e).password]])]),t("div",null,[s[13]||(s[13]=t("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"}," ç¡®è®¤å¯†ç  ",-1)),d(t("input",{id:"confirmPassword","onUpdate:modelValue":s[4]||(s[4]=a=>r(e).confirmPassword=a),type:"password",required:"",class:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç "},null,512),[[i,r(e).confirmPassword]])])]),r(o)?(p(),u("div",H,k(r(o)),1)):v("",!0),t("div",null,[t("button",{type:"submit",disabled:r(l)||!r(y),class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[r(l)?(p(),u("span",E,s[14]||(s[14]=[t("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):v("",!0),m(" "+k(r(l)?"æ³¨å†Œä¸­...":"æ³¨å†Œ"),1)],8,L)]),s[15]||(s[15]=t("div",{class:"text-xs text-gray-500 text-center"}," æ³¨å†Œå³è¡¨ç¤ºæ‚¨åŒæ„æˆ‘ä»¬çš„æœåŠ¡æ¡æ¬¾å’Œéšç§æ”¿ç­– ",-1))],32)])])}}};export{K as default};
