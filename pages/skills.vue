<template>
  <div class="min-h-screen bg-gray-50">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-white shadow-sm border-b">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <NuxtLink to="/" class="text-2xl mr-4">ğŸ±</NuxtLink>
            <h1 class="text-xl font-bold text-gray-900">æŠ€èƒ½ç­‰çº§</h1>
          </div>
          
          <div class="flex items-center space-x-4">
            <div class="flex space-x-2">
              <NuxtLink to="/" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900">
                é¦–é¡µ
              </NuxtLink>
              <NuxtLink to="/collect" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900">
                é‡‡é›†
              </NuxtLink>
              <NuxtLink to="/inventory" class="px-3 py-2 rounded-md text-sm font-medium text-gray-600 hover:text-gray-900">
                ä»“åº“
              </NuxtLink>
              <NuxtLink to="/skills" class="px-3 py-2 rounded-md text-sm font-medium bg-blue-100 text-blue-700">
                æŠ€èƒ½
              </NuxtLink>
            </div>
            <button @click="handleLogout" class="cat-button cat-button-secondary text-sm">
              ç™»å‡º
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
      <div class="skills-page">
    
    <div class="skills-container">
      <!-- ç§æ¤æŠ€èƒ½ -->
      <div class="skill-card">
        <div class="skill-header">
          <div class="skill-icon farming-icon">ğŸŒ±</div>
          <div class="skill-info">
            <h2 class="skill-name">ç§æ¤</h2>
            <div class="skill-level">ç­‰çº§: {{ gameStore.skills.farming.level }}</div>
          </div>
        </div>
        
        <div class="skill-progress-container">
          <div class="skill-progress-bar">
            <div class="skill-progress-fill" :style="{ width: `${gameStore.skills.farming.progress}%` }"></div>
          </div>
          <div class="skill-progress-text">
            {{ gameStore.skills.farming.experience }} / {{ gameStore.skills.farming.nextLevelExp }}
          </div>
        </div>
        
        <div class="skill-description">
          <p>æé«˜ç§æ¤æ•ˆç‡å’Œäº§é‡ã€‚æ¯æå‡ä¸€çº§ï¼Œç§æ¤ä»»åŠ¡çš„ç»éªŒå€¼å¥–åŠ±å¢åŠ 5%ã€‚</p>
        </div>
        
        <div class="skill-benefits">
          <h3>ç­‰çº§ç‰¹æƒ</h3>
          <ul>
            <li>ç­‰çº§ 5: ç§æ¤ä»»åŠ¡èƒ½é‡æ¶ˆè€—å‡å°‘10%</li>
            <li>ç­‰çº§ 10: ç§æ¤ä»»åŠ¡å®Œæˆæ—¶é—´å‡å°‘5%</li>
            <li>ç­‰çº§ 15: ç§æ¤ä»»åŠ¡å¥–åŠ±ç‰©å“æ•°é‡å¢åŠ 10%</li>
            <li>ç­‰çº§ 20: è§£é”ç¨€æœ‰ç§å­</li>
          </ul>
        </div>
      </div>
      
      <!-- é‡‡çŸ¿æŠ€èƒ½ -->
      <div class="skill-card">
        <div class="skill-header">
          <div class="skill-icon mining-icon">â›ï¸</div>
          <div class="skill-info">
            <h2 class="skill-name">é‡‡çŸ¿</h2>
            <div class="skill-level">ç­‰çº§: {{ gameStore.skills.mining.level }}</div>
          </div>
        </div>
        
        <div class="skill-progress-container">
          <div class="skill-progress-bar">
            <div class="skill-progress-fill" :style="{ width: `${gameStore.skills.mining.progress}%` }"></div>
          </div>
          <div class="skill-progress-text">
            {{ gameStore.skills.mining.experience }} / {{ gameStore.skills.mining.nextLevelExp }}
          </div>
        </div>
        
        <div class="skill-description">
          <p>æé«˜é‡‡çŸ¿æ•ˆç‡å’Œç¨€æœ‰çŸ¿ç‰©å‘ç°ç‡ã€‚æ¯æå‡ä¸€çº§ï¼Œé‡‡çŸ¿ä»»åŠ¡çš„ç»éªŒå€¼å¥–åŠ±å¢åŠ 5%ã€‚</p>
        </div>
        
        <div class="skill-benefits">
          <h3>ç­‰çº§ç‰¹æƒ</h3>
          <ul>
            <li>ç­‰çº§ 5: é‡‡çŸ¿ä»»åŠ¡èƒ½é‡æ¶ˆè€—å‡å°‘10%</li>
            <li>ç­‰çº§ 10: é‡‡çŸ¿ä»»åŠ¡å®Œæˆæ—¶é—´å‡å°‘5%</li>
            <li>ç­‰çº§ 15: å‘ç°ç¨€æœ‰çŸ¿ç‰©çš„å‡ ç‡å¢åŠ 10%</li>
            <li>ç­‰çº§ 20: è§£é”ç¨€æœ‰çŸ¿çŸ³</li>
          </ul>
        </div>
      </div>
      
      <!-- å†œä¸šæŠ€èƒ½ -->
      <div class="skill-card">
        <div class="skill-header">
          <div class="skill-icon agriculture-icon">ğŸŒ¾</div>
          <div class="skill-info">
            <h2 class="skill-name">å†œä¸š</h2>
            <div class="skill-level">ç­‰çº§: {{ gameStore.skills.agriculture.level }}</div>
          </div>
        </div>
        
        <div class="skill-progress-container">
          <div class="skill-progress-bar">
            <div class="skill-progress-fill" :style="{ width: `${gameStore.skills.agriculture.progress}%` }"></div>
          </div>
          <div class="skill-progress-text">
            {{ gameStore.skills.agriculture.experience }} / {{ gameStore.skills.agriculture.nextLevelExp }}
          </div>
        </div>
        
        <div class="skill-description">
          <p>æé«˜å†œåœºä½œç‰©çš„äº§é‡å’Œå“è´¨ã€‚æ¯æå‡ä¸€çº§ï¼Œå†œä¸šä»»åŠ¡çš„ç»éªŒå€¼å¥–åŠ±å¢åŠ 5%ã€‚</p>
        </div>
        
        <div class="skill-benefits">
          <h3>ç­‰çº§ç‰¹æƒ</h3>
          <ul>
            <li>ç­‰çº§ 5: å†œä¸šä»»åŠ¡èƒ½é‡æ¶ˆè€—å‡å°‘10%</li>
            <li>ç­‰çº§ 10: å†œä¸šä»»åŠ¡å®Œæˆæ—¶é—´å‡å°‘5%</li>
            <li>ç­‰çº§ 15: å†œä¸šä»»åŠ¡å¥–åŠ±ç‰©å“æ•°é‡å¢åŠ 15%</li>
            <li>ç­‰çº§ 20: è§£é”ç¨€æœ‰ä½œç‰©ç§å­</li>
          </ul>
        </div>
      </div>
      
      <!-- é’“é±¼æŠ€èƒ½ -->
      <div class="skill-card">
        <div class="skill-header">
          <div class="skill-icon fishing-icon">ğŸ£</div>
          <div class="skill-info">
            <h2 class="skill-name">é’“é±¼</h2>
            <div class="skill-level">ç­‰çº§: {{ gameStore.skills.fishing.level }}</div>
          </div>
        </div>
        
        <div class="skill-progress-container">
          <div class="skill-progress-bar">
            <div class="skill-progress-fill" :style="{ width: `${gameStore.skills.fishing.progress}%` }"></div>
          </div>
          <div class="skill-progress-text">
            {{ gameStore.skills.fishing.experience }} / {{ gameStore.skills.fishing.nextLevelExp }}
          </div>
        </div>
        
        <div class="skill-description">
          <p>æé«˜é’“é±¼æˆåŠŸç‡å’Œç¨€æœ‰é±¼ç±»æ•è·å‡ ç‡ã€‚æ¯æå‡ä¸€çº§ï¼Œé’“é±¼ä»»åŠ¡çš„ç»éªŒå€¼å¥–åŠ±å¢åŠ 5%ã€‚</p>
        </div>
        
        <div class="skill-benefits">
          <h3>ç­‰çº§ç‰¹æƒ</h3>
          <ul>
            <li>ç­‰çº§ 5: é’“é±¼ä»»åŠ¡èƒ½é‡æ¶ˆè€—å‡å°‘10%</li>
            <li>ç­‰çº§ 10: é’“é±¼ä»»åŠ¡å®Œæˆæ—¶é—´å‡å°‘5%</li>
            <li>ç­‰çº§ 15: ç¨€æœ‰é±¼ç±»æ•è·å‡ ç‡å¢åŠ 20%</li>
            <li>ç­‰çº§ 20: è§£é”ä¼ è¯´çº§é±¼ç±»</li>
          </ul>
        </div>
      </div>
      </div>
    </div>
    </main>
  </div>
</template>

<script setup>
import { useGameStore } from '~/stores/game'
import { useAuthStore } from '~/stores/auth'

const gameStore = useGameStore()
const authStore = useAuthStore()

// ç¡®ä¿æ¸¸æˆçŠ¶æ€å·²åŠ è½½
onMounted(async () => {
  if (!gameStore.connected) {
    await gameStore.loadGameState()
  }
})

// ç™»å‡ºåŠŸèƒ½
const handleLogout = async () => {
  await authStore.logout()
  await navigateTo('/login')
}
</script>

<style scoped>
.skills-page {
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.page-title {
  text-align: center;
  margin-bottom: 30px;
  color: #4a5568;
}

.skills-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 20px;
}

.skill-card {
  background-color: white;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  padding: 20px;
  transition: transform 0.2s;
}

.skill-card:hover {
  transform: translateY(-5px);
}

.skill-header {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
}

.skill-icon {
  font-size: 2.5rem;
  margin-right: 15px;
  width: 60px;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.farming-icon {
  background-color: #c6f6d5;
  color: #38a169;
}

.mining-icon {
  background-color: #e9d8fd;
  color: #805ad5;
}

.agriculture-icon {
  background-color: #fef5e7;
  color: #d69e2e;
}

.fishing-icon {
  background-color: #e6fffa;
  color: #319795;
}

.skill-info {
  flex: 1;
}

.skill-name {
  margin: 0;
  font-size: 1.5rem;
  color: #2d3748;
}

.skill-level {
  font-size: 1.1rem;
  color: #4a5568;
  font-weight: 500;
}

.skill-progress-container {
  margin-bottom: 20px;
}

.skill-progress-bar {
  height: 10px;
  background-color: #edf2f7;
  border-radius: 5px;
  overflow: hidden;
  margin-bottom: 5px;
}

.skill-progress-fill {
  height: 100%;
  background-color: #4299e1;
  border-radius: 5px;
  transition: width 0.3s ease;
}

.skill-progress-text {
  text-align: right;
  font-size: 0.9rem;
  color: #718096;
}

.skill-description {
  margin-bottom: 20px;
  color: #4a5568;
  line-height: 1.5;
}

.skill-benefits h3 {
  font-size: 1.1rem;
  color: #2d3748;
  margin-bottom: 10px;
}

.skill-benefits ul {
  padding-left: 20px;
  color: #4a5568;
}

.skill-benefits li {
  margin-bottom: 5px;
}

@media (max-width: 768px) {
  .skills-container {
    grid-template-columns: 1fr;
  }
}
</style>